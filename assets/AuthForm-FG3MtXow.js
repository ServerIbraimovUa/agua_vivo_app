import{R as P,j as L}from"./index-orU8pwSR.js";var ce=e=>e.type==="checkbox",ne=e=>e instanceof Date,T=e=>e==null;const er=e=>typeof e=="object";var S=e=>!T(e)&&!Array.isArray(e)&&er(e)&&!ne(e),gr=e=>S(e)&&e.target?ce(e.target)?e.target.checked:e.target.value:e,vr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,br=(e,n)=>e.has(vr(n)),_r=e=>{const n=e.constructor&&e.constructor.prototype;return S(n)&&n.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let n;const s=Array.isArray(e);if(e instanceof Date)n=new Date(e);else if(e instanceof Set)n=new Set(e);else if(!(Oe&&(e instanceof Blob||e instanceof FileList))&&(s||S(e)))if(n=s?[]:{},!s&&!_r(e))n=e;else for(const t in e)e.hasOwnProperty(t)&&(n[t]=M(e[t]));else return e;return n}var fe=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,y=(e,n,s)=>{if(!n||!S(e))return s;const t=fe(n.split(/[,[\].]+?/)).reduce((a,l)=>T(a)?a:a[l],e);return D(t)||t===e?D(e[n])?s:e[n]:t},G=e=>typeof e=="boolean";const $e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},B={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};P.createContext(null);var xr=(e,n,s,t=!0)=>{const a={defaultValues:n._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const f=l;return n._proxyFormState[f]!==B.all&&(n._proxyFormState[f]=!t||B.all),s&&(s[f]=!0),e[f]}});return a},N=e=>S(e)&&!Object.keys(e).length,Ar=(e,n,s,t)=>{s(e);const{name:a,...l}=e;return N(l)||Object.keys(l).length>=Object.keys(n).length||Object.keys(l).find(f=>n[f]===(!t||B.all))},Se=e=>Array.isArray(e)?e:[e];function Vr(e){const n=P.useRef(e);n.current=e,P.useEffect(()=>{const s=!e.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var H=e=>typeof e=="string",wr=(e,n,s,t,a)=>H(e)?(t&&n.watch.add(e),y(s,e,a)):Array.isArray(e)?e.map(l=>(t&&n.watch.add(l),y(s,l))):(t&&(n.watchAll=!0),s),Le=e=>/^\w*$/.test(e),rr=e=>fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),w=(e,n,s)=>{let t=-1;const a=Le(n)?[n]:rr(n),l=a.length,f=l-1;for(;++t<l;){const _=a[t];let A=s;if(t!==f){const R=e[_];A=S(R)||Array.isArray(R)?R:isNaN(+a[t+1])?{}:[]}e[_]=A,e=e[_]}return e},Fr=(e,n,s,t,a)=>n?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:a||!0}}:{},Ke=e=>({isOnSubmit:!e||e===B.onSubmit,isOnBlur:e===B.onBlur,isOnChange:e===B.onChange,isOnAll:e===B.all,isOnTouch:e===B.onTouched}),ze=(e,n,s)=>!s&&(n.watchAll||n.watch.has(e)||[...n.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const oe=(e,n,s,t)=>{for(const a of s||Object.keys(e)){const l=y(e,a);if(l){const{_f:f,..._}=l;if(f){if(f.refs&&f.refs[0]&&n(f.refs[0],a)&&!t)break;if(f.ref&&n(f.ref,f.name)&&!t)break;oe(_,n)}else S(_)&&oe(_,n)}}};var Dr=(e,n,s)=>{const t=fe(y(e,s));return w(t,"root",n[s]),w(e,s,t),e},Re=e=>e.type==="file",X=e=>typeof e=="function",ge=e=>{if(!Oe)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},he=e=>H(e),Ce=e=>e.type==="radio",ve=e=>e instanceof RegExp;const Ge={value:!1,isValid:!1},Je={value:!0,isValid:!0};var tr=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ge}return Ge};const Qe={isValid:!1,value:null};var sr=e=>Array.isArray(e)?e.reduce((n,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:n,Qe):Qe;function Xe(e,n,s="validate"){if(he(e)||Array.isArray(e)&&e.every(he)||G(e)&&!e)return{type:s,message:he(e)?e:"",ref:n}}var ie=e=>S(e)&&!ve(e)?e:{value:e,message:""},Ye=async(e,n,s,t,a)=>{const{ref:l,refs:f,required:_,maxLength:A,minLength:R,min:re,max:m,pattern:g,validate:J,name:C,valueAsNumber:de,mount:xe,disabled:Q}=e._f,b=y(n,C);if(!xe||Q)return{};const W=f?f[0]:l,$=x=>{t&&W.reportValidity&&(W.setCustomValidity(G(x)?"":x||""),W.reportValidity())},p={},ue=Ce(l),te=ce(l),Ae=ue||te,q=(de||Re(l))&&D(l.value)&&D(b)||ge(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,Y=Fr.bind(null,C,s,p),K=(x,v,F,O=z.maxLength,U=z.minLength)=>{const I=x?v:F;p[C]={type:x?O:U,message:I,ref:l,...Y(x?O:U,I)}};if(a?!Array.isArray(b)||!b.length:_&&(!Ae&&(q||T(b))||G(b)&&!b||te&&!tr(f).isValid||ue&&!sr(f).isValid)){const{value:x,message:v}=he(_)?{value:!!_,message:_}:ie(_);if(x&&(p[C]={type:z.required,message:v,ref:W,...Y(z.required,v)},!s))return $(v),p}if(!q&&(!T(re)||!T(m))){let x,v;const F=ie(m),O=ie(re);if(!T(b)&&!isNaN(b)){const U=l.valueAsNumber||b&&+b;T(F.value)||(x=U>F.value),T(O.value)||(v=U<O.value)}else{const U=l.valueAsDate||new Date(b),I=ye=>new Date(new Date().toDateString()+" "+ye),Z=l.type=="time",le=l.type=="week";H(F.value)&&b&&(x=Z?I(b)>I(F.value):le?b>F.value:U>new Date(F.value)),H(O.value)&&b&&(v=Z?I(b)<I(O.value):le?b<O.value:U<new Date(O.value))}if((x||v)&&(K(!!x,F.message,O.message,z.max,z.min),!s))return $(p[C].message),p}if((A||R)&&!q&&(H(b)||a&&Array.isArray(b))){const x=ie(A),v=ie(R),F=!T(x.value)&&b.length>+x.value,O=!T(v.value)&&b.length<+v.value;if((F||O)&&(K(F,x.message,v.message),!s))return $(p[C].message),p}if(g&&!q&&H(b)){const{value:x,message:v}=ie(g);if(ve(x)&&!b.match(x)&&(p[C]={type:z.pattern,message:v,ref:l,...Y(z.pattern,v)},!s))return $(v),p}if(J){if(X(J)){const x=await J(b,n),v=Xe(x,W);if(v&&(p[C]={...v,...Y(z.validate,v.message)},!s))return $(v.message),p}else if(S(J)){let x={};for(const v in J){if(!N(x)&&!s)break;const F=Xe(await J[v](b,n),W,v);F&&(x={...F,...Y(v,F.message)},$(F.message),s&&(p[C]=x))}if(!N(x)&&(p[C]={ref:W,...x},!s))return p}}return $(!0),p};function mr(e,n){const s=n.slice(0,-1).length;let t=0;for(;t<s;)e=D(e)?t++:e[n[t++]];return e}function Sr(e){for(const n in e)if(e.hasOwnProperty(n)&&!D(e[n]))return!1;return!0}function E(e,n){const s=Array.isArray(n)?n:Le(n)?[n]:rr(n),t=s.length===1?e:mr(e,s),a=s.length-1,l=s[a];return t&&delete t[l],a!==0&&(S(t)&&N(t)||Array.isArray(t)&&Sr(t))&&E(e,s.slice(0,-1)),e}var pe=()=>{let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}},be=e=>T(e)||!er(e);function ee(e,n){if(be(e)||be(n))return e===n;if(ne(e)&&ne(n))return e.getTime()===n.getTime();const s=Object.keys(e),t=Object.keys(n);if(s.length!==t.length)return!1;for(const a of s){const l=e[a];if(!t.includes(a))return!1;if(a!=="ref"){const f=n[a];if(ne(l)&&ne(f)||S(l)&&S(f)||Array.isArray(l)&&Array.isArray(f)?!ee(l,f):l!==f)return!1}}return!0}var ir=e=>e.type==="select-multiple",pr=e=>Ce(e)||ce(e),ke=e=>ge(e)&&e.isConnected,nr=e=>{for(const n in e)if(X(e[n]))return!0;return!1};function _e(e,n={}){const s=Array.isArray(e);if(S(e)||s)for(const t in e)Array.isArray(e[t])||S(e[t])&&!nr(e[t])?(n[t]=Array.isArray(e[t])?[]:{},_e(e[t],n[t])):T(e[t])||(n[t]=!0);return n}function ur(e,n,s){const t=Array.isArray(e);if(S(e)||t)for(const a in e)Array.isArray(e[a])||S(e[a])&&!nr(e[a])?D(n)||be(s[a])?s[a]=Array.isArray(e[a])?_e(e[a],[]):{..._e(e[a])}:ur(e[a],T(n)?{}:n[a],s[a]):s[a]=!ee(e[a],n[a]);return s}var Ee=(e,n)=>ur(e,n,_e(n)),lr=(e,{valueAsNumber:n,valueAsDate:s,setValueAs:t})=>D(e)?e:n?e===""?NaN:e&&+e:s&&H(e)?new Date(e):t?t(e):e;function Te(e){const n=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):n.disabled))return Re(n)?n.files:Ce(n)?sr(e.refs).value:ir(n)?[...n.selectedOptions].map(({value:s})=>s):ce(n)?tr(e.refs).value:lr(D(n.value)?e.ref.value:n.value,e)}var kr=(e,n,s,t)=>{const a={};for(const l of e){const f=y(n,l);f&&w(a,l,f._f)}return{criteriaMode:s,names:[...e],fields:a,shouldUseNativeValidation:t}},ae=e=>D(e)?e:ve(e)?e.source:S(e)?ve(e.value)?e.value.source:e.value:e,Er=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Ze(e,n,s){const t=y(e,s);if(t||Le(s))return{error:t,name:s};const a=s.split(".");for(;a.length;){const l=a.join("."),f=y(n,l),_=y(e,l);if(f&&!Array.isArray(f)&&s!==l)return{name:s};if(_&&_.type)return{name:l,error:_};a.pop()}return{name:s}}var Tr=(e,n,s,t,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(n||e):(s?t.isOnBlur:a.isOnBlur)?!e:(s?t.isOnChange:a.isOnChange)?e:!0,Or=(e,n)=>!fe(y(e,n)).length&&E(e,n);const Lr={mode:B.onSubmit,reValidateMode:B.onChange,shouldFocusError:!0};function Rr(e={},n){let s={...Lr,...e},t={submitCount:0,isDirty:!1,isLoading:X(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},l=S(s.defaultValues)||S(s.values)?M(s.defaultValues||s.values)||{}:{},f=s.shouldUnregister?{}:M(l),_={action:!1,mount:!1,watch:!1},A={mount:new Set,unMount:new Set,array:new Set,watch:new Set},R,re=0;const m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:pe(),array:pe(),state:pe()},J=Ke(s.mode),C=Ke(s.reValidateMode),de=s.criteriaMode===B.all,xe=r=>i=>{clearTimeout(re),re=setTimeout(r,i)},Q=async r=>{if(m.isValid||r){const i=s.resolver?N((await q()).errors):await K(a,!0);i!==t.isValid&&g.state.next({isValid:i})}},b=r=>m.isValidating&&g.state.next({isValidating:r}),W=(r,i=[],u,d,c=!0,o=!0)=>{if(d&&u){if(_.action=!0,o&&Array.isArray(y(a,r))){const h=u(y(a,r),d.argA,d.argB);c&&w(a,r,h)}if(o&&Array.isArray(y(t.errors,r))){const h=u(y(t.errors,r),d.argA,d.argB);c&&w(t.errors,r,h),Or(t.errors,r)}if(m.touchedFields&&o&&Array.isArray(y(t.touchedFields,r))){const h=u(y(t.touchedFields,r),d.argA,d.argB);c&&w(t.touchedFields,r,h)}m.dirtyFields&&(t.dirtyFields=Ee(l,f)),g.state.next({name:r,isDirty:v(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(f,r,i)},$=(r,i)=>{w(t.errors,r,i),g.state.next({errors:t.errors})},p=r=>{t.errors=r,g.state.next({errors:t.errors,isValid:!1})},ue=(r,i,u,d)=>{const c=y(a,r);if(c){const o=y(f,r,D(u)?y(l,r):u);D(o)||d&&d.defaultChecked||i?w(f,r,i?o:Te(c._f)):U(r,o),_.mount&&Q()}},te=(r,i,u,d,c)=>{let o=!1,h=!1;const V={name:r},k=!!(y(a,r)&&y(a,r)._f.disabled);if(!u||d){m.isDirty&&(h=t.isDirty,t.isDirty=V.isDirty=v(),o=h!==V.isDirty);const j=k||ee(y(l,r),i);h=!!(!k&&y(t.dirtyFields,r)),j||k?E(t.dirtyFields,r):w(t.dirtyFields,r,!0),V.dirtyFields=t.dirtyFields,o=o||m.dirtyFields&&h!==!j}if(u){const j=y(t.touchedFields,r);j||(w(t.touchedFields,r,u),V.touchedFields=t.touchedFields,o=o||m.touchedFields&&j!==u)}return o&&c&&g.state.next(V),o?V:{}},Ae=(r,i,u,d)=>{const c=y(t.errors,r),o=m.isValid&&G(i)&&t.isValid!==i;if(e.delayError&&u?(R=xe(()=>$(r,u)),R(e.delayError)):(clearTimeout(re),R=null,u?w(t.errors,r,u):E(t.errors,r)),(u?!ee(c,u):c)||!N(d)||o){const h={...d,...o&&G(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}b(!1)},q=async r=>s.resolver(f,s.context,kr(r||A.mount,a,s.criteriaMode,s.shouldUseNativeValidation)),Y=async r=>{const{errors:i}=await q(r);if(r)for(const u of r){const d=y(i,u);d?w(t.errors,u,d):E(t.errors,u)}else t.errors=i;return i},K=async(r,i,u={valid:!0})=>{for(const d in r){const c=r[d];if(c){const{_f:o,...h}=c;if(o){const V=A.array.has(o.name),k=await Ye(c,f,de,s.shouldUseNativeValidation&&!i,V);if(k[o.name]&&(u.valid=!1,i))break;!i&&(y(k,o.name)?V?Dr(t.errors,k,o.name):w(t.errors,o.name,k[o.name]):E(t.errors,o.name))}h&&await K(h,i,u)}}return u.valid},x=()=>{for(const r of A.unMount){const i=y(a,r);i&&(i._f.refs?i._f.refs.every(u=>!ke(u)):!ke(i._f.ref))&&we(r)}A.unMount=new Set},v=(r,i)=>(r&&i&&w(f,r,i),!ee(Ue(),l)),F=(r,i,u)=>wr(r,A,{..._.mount?f:D(i)?l:H(r)?{[r]:i}:i},u,i),O=r=>fe(y(_.mount?f:l,r,e.shouldUnregister?y(l,r,[]):[])),U=(r,i,u={})=>{const d=y(a,r);let c=i;if(d){const o=d._f;o&&(!o.disabled&&w(f,r,lr(i,o)),c=ge(o.ref)&&T(i)?"":i,ir(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?ce(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(V=>V===h.value):c===h.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(h=>h.checked=h.value===c):Re(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||g.values.next({name:r,values:{...f}})))}(u.shouldDirty||u.shouldTouch)&&te(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Ve(r)},I=(r,i,u)=>{for(const d in i){const c=i[d],o=`${r}.${d}`,h=y(a,o);(A.array.has(r)||!be(c)||h&&!h._f)&&!ne(c)?I(o,c,u):U(o,c,u)}},Z=(r,i,u={})=>{const d=y(a,r),c=A.array.has(r),o=M(i);w(f,r,o),c?(g.array.next({name:r,values:{...f}}),(m.isDirty||m.dirtyFields)&&u.shouldDirty&&g.state.next({name:r,dirtyFields:Ee(l,f),isDirty:v(r,o)})):d&&!d._f&&!T(o)?I(r,o,u):U(r,o,u),ze(r,A)&&g.state.next({...t}),g.values.next({name:r,values:{...f}}),!_.mount&&n()},le=async r=>{const i=r.target;let u=i.name,d=!0;const c=y(a,u),o=()=>i.type?Te(c._f):gr(r),h=V=>{d=Number.isNaN(V)||V===y(f,u,V)};if(c){let V,k;const j=o(),se=r.type===$e.BLUR||r.type===$e.FOCUS_OUT,dr=!Er(c._f)&&!s.resolver&&!y(t.errors,u)&&!c._f.deps||Tr(se,y(t.touchedFields,u),t.isSubmitted,C,J),De=ze(u,A,se);w(f,u,j),se?(c._f.onBlur&&c._f.onBlur(r),R&&R(0)):c._f.onChange&&c._f.onChange(r);const me=te(u,j,se,!1),yr=!N(me)||De;if(!se&&g.values.next({name:u,type:r.type,values:{...f}}),dr)return m.isValid&&Q(),yr&&g.state.next({name:u,...De?{}:me});if(!se&&De&&g.state.next({...t}),b(!0),s.resolver){const{errors:He}=await q([u]);if(h(j),d){const hr=Ze(t.errors,a,u),We=Ze(He,a,hr.name||u);V=We.error,u=We.name,k=N(He)}}else V=(await Ye(c,f,de,s.shouldUseNativeValidation))[u],h(j),d&&(V?k=!1:m.isValid&&(k=await K(a,!0)));d&&(c._f.deps&&Ve(c._f.deps),Ae(u,k,V,me))}},ye=(r,i)=>{if(y(t.errors,i)&&r.focus)return r.focus(),1},Ve=async(r,i={})=>{let u,d;const c=Se(r);if(b(!0),s.resolver){const o=await Y(D(r)?r:c);u=N(o),d=r?!c.some(h=>y(o,h)):u}else r?(d=(await Promise.all(c.map(async o=>{const h=y(a,o);return await K(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!d&&!t.isValid)&&Q()):d=u=await K(a);return g.state.next({...!H(r)||m.isValid&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors,isValidating:!1}),i.shouldFocus&&!d&&oe(a,ye,r?c:A.mount),d},Ue=r=>{const i={...l,..._.mount?f:{}};return D(r)?i:H(r)?y(i,r):r.map(u=>y(i,u))},Me=(r,i)=>({invalid:!!y((i||t).errors,r),isDirty:!!y((i||t).dirtyFields,r),isTouched:!!y((i||t).touchedFields,r),error:y((i||t).errors,r)}),ar=r=>{r&&Se(r).forEach(i=>E(t.errors,i)),g.state.next({errors:r?t.errors:{}})},Ne=(r,i,u)=>{const d=(y(a,r,{_f:{}})._f||{}).ref;w(t.errors,r,{...i,ref:d}),g.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&d&&d.focus&&d.focus()},or=(r,i)=>X(r)?g.values.subscribe({next:u=>r(F(void 0,i),u)}):F(r,i,!0),we=(r,i={})=>{for(const u of r?Se(r):A.mount)A.mount.delete(u),A.array.delete(u),i.keepValue||(E(a,u),E(f,u)),!i.keepError&&E(t.errors,u),!i.keepDirty&&E(t.dirtyFields,u),!i.keepTouched&&E(t.touchedFields,u),!s.shouldUnregister&&!i.keepDefaultValue&&E(l,u);g.values.next({values:{...f}}),g.state.next({...t,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&Q()},Pe=({disabled:r,name:i,field:u,fields:d,value:c})=>{if(G(r)){const o=r?void 0:D(c)?Te(u?u._f:y(d,i)._f):c;w(f,i,o),te(i,o,!1,!1,!0)}},Fe=(r,i={})=>{let u=y(a,r);const d=G(i.disabled);return w(a,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...i}}),A.mount.add(r),u?Pe({field:u,disabled:i.disabled,name:r,value:i.value}):ue(r,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:ae(i.min),max:ae(i.max),minLength:ae(i.minLength),maxLength:ae(i.maxLength),pattern:ae(i.pattern)}:{},name:r,onChange:le,onBlur:le,ref:c=>{if(c){Fe(r,i),u=y(a,r);const o=D(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=pr(o),V=u._f.refs||[];if(h?V.find(k=>k===o):o===u._f.ref)return;w(a,r,{_f:{...u._f,...h?{refs:[...V.filter(ke),o,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),ue(r,!1,void 0,o)}else u=y(a,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(br(A.array,r)&&_.action)&&A.unMount.add(r)}}},Be=()=>s.shouldFocusError&&oe(a,ye,A.mount),cr=r=>{G(r)&&(g.state.next({disabled:r}),oe(a,(i,u)=>{let d=r;const c=y(a,u);c&&G(c._f.disabled)&&(d||(d=c._f.disabled)),i.disabled=d},0,!1))},qe=(r,i)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let d=M(f);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:o}=await q();t.errors=c,d=o}else await K(a);E(t.errors,"root"),N(t.errors)?(g.state.next({errors:{}}),await r(d,u)):(i&&await i({...t.errors},u),Be(),setTimeout(Be)),g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors),submitCount:t.submitCount+1,errors:t.errors})},fr=(r,i={})=>{y(a,r)&&(D(i.defaultValue)?Z(r,M(y(l,r))):(Z(r,i.defaultValue),w(l,r,M(i.defaultValue))),i.keepTouched||E(t.touchedFields,r),i.keepDirty||(E(t.dirtyFields,r),t.isDirty=i.defaultValue?v(r,M(y(l,r))):v()),i.keepError||(E(t.errors,r),m.isValid&&Q()),g.state.next({...t}))},Ie=(r,i={})=>{const u=r?M(r):l,d=M(u),c=r&&!N(r)?d:l;if(i.keepDefaultValues||(l=u),!i.keepValues){if(i.keepDirtyValues)for(const o of A.mount)y(t.dirtyFields,o)?w(c,o,y(f,o)):Z(o,y(c,o));else{if(Oe&&D(r))for(const o of A.mount){const h=y(a,o);if(h&&h._f){const V=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(ge(V)){const k=V.closest("form");if(k){k.reset();break}}}}a={}}f=e.shouldUnregister?i.keepDefaultValues?M(l):{}:M(c),g.array.next({values:{...c}}),g.values.next({values:{...c}})}A={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_.mount&&n(),_.mount=!m.isValid||!!i.keepIsValid,_.watch=!!e.shouldUnregister,g.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ee(r,l)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:i.keepDirtyValues?t.dirtyFields:i.keepDefaultValues&&r?Ee(l,r):{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},je=(r,i)=>Ie(X(r)?r(f):r,i);return{control:{register:Fe,unregister:we,getFieldState:Me,handleSubmit:qe,setError:Ne,_executeSchema:q,_getWatch:F,_getDirty:v,_updateValid:Q,_removeUnmounted:x,_updateFieldArray:W,_updateDisabledField:Pe,_getFieldArray:O,_reset:Ie,_resetDefaultValues:()=>X(s.defaultValues)&&s.defaultValues().then(r=>{je(r,s.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:cr,_subjects:g,_proxyFormState:m,_setErrors:p,get _fields(){return a},get _formValues(){return f},get _state(){return _},set _state(r){_=r},get _defaultValues(){return l},get _names(){return A},set _names(r){A=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:Ve,register:Fe,handleSubmit:qe,watch:or,setValue:Z,getValues:Ue,reset:je,resetField:fr,clearErrors:ar,unregister:we,setError:Ne,setFocus:(r,i={})=>{const u=y(a,r),d=u&&u._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),i.shouldSelect&&c.select())}},getFieldState:Me}}function Cr(e={}){const n=P.useRef(),s=P.useRef(),[t,a]=P.useState({isDirty:!1,isValidating:!1,isLoading:X(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:X(e.defaultValues)?void 0:e.defaultValues});n.current||(n.current={...Rr(e,()=>a(f=>({...f}))),formState:t});const l=n.current.control;return l._options=e,Vr({subject:l._subjects.state,next:f=>{Ar(f,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),P.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),P.useEffect(()=>{if(l._proxyFormState.isDirty){const f=l._getDirty();f!==t.isDirty&&l._subjects.state.next({isDirty:f})}},[l,t.isDirty]),P.useEffect(()=>{e.values&&!ee(e.values,s.current)?(l._reset(e.values,l._options.resetOptions),s.current=e.values,a(f=>({...f}))):l._resetDefaultValues()},[e.values,l]),P.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),P.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),n.current.formState=xr(t,l),n.current}const Br=()=>{const{register:e,handleSubmit:n,watch:s,formState:{errors:t}}=Cr(),a=f=>console.log(f),l=s("password","");return L.jsxs("form",{onSubmit:n(a),children:[L.jsxs("label",{children:[L.jsx("span",{children:"Enter your email"}),L.jsx("input",{...e("email",{required:!0}),type:"email",placeholder:"E-mail"}),t.email&&L.jsx("span",{children:"This field is required"})]}),L.jsxs("label",{children:[L.jsx("span",{children:"Enter your password"}),L.jsx("input",{...e("password",{required:!0}),type:"password",placeholder:"Password"}),t.password&&L.jsx("span",{children:"This field is required"})]}),L.jsxs("label",{children:[L.jsx("span",{children:"Repeat password"}),L.jsx("input",{...e("repeatPassword",{required:!0,validate:f=>f===l||"Passwords do not match"}),type:"password",placeholder:"Repeat password"}),t.repeatPassword&&L.jsx("span",{children:"This field is required"})]}),L.jsx("button",{type:"submit",children:"Sign Up"})]})};export{Br as A};
